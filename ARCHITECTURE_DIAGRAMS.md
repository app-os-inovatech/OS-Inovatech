# ğŸ—ï¸ RBAC Architecture & Diagrams

## ğŸ“ Arquitetura Geral do Sistema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      APLICAÃ‡ÃƒO COMPLETA                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   FRONTEND       â”‚              â”‚      BACKEND             â”‚ â”‚
â”‚  â”‚   (React 18)     â”‚              â”‚    (Node/Express)        â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚                  â”‚              â”‚                          â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚ â”‚ Login        â”‚ â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚ â”‚ POST /auth/login  â”‚  â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚       â†“          â”‚              â”‚          â†“              â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚ â”‚ PrivateRoute â”‚ â”‚              â”‚ â”‚ JWT Validation     â”‚  â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚       â†“          â”‚              â”‚          â†“              â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚ â”‚ Layout       â”‚ â”‚              â”‚ â”‚ Role Middleware    â”‚  â”‚ â”‚
â”‚  â”‚ â”‚ (Sidebar)    â”‚ â”‚              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚              â”‚          â†“              â”‚ â”‚
â”‚  â”‚       â†“          â”‚              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â†â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚ MySQL Database     â”‚  â”‚ â”‚
â”‚  â”‚ â”‚ Components   â”‚ â”‚              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚              â”‚                        â”‚ â”‚
â”‚  â”‚                  â”‚              â”‚                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â†‘                                  â†‘                    â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                            API Calls (Axios)                      â”‚
â”‚                            JWT in Headers                         â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Fluxo de AutenticaÃ§Ã£o Detalhado

```
USUÃRIO                    FRONTEND                  BACKEND              BANCO DE DADOS
   â”‚                         â”‚                         â”‚                      â”‚
   â”‚â”€â”€â”€â”€â”€â”€Loginâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚                         â”‚                      â”‚
   â”‚ email/senha             â”‚                         â”‚                      â”‚
   â”‚                         â”‚â”€â”€POST /auth/loginâ”€â”€â”€â”€â”€â”€> â”‚                      â”‚
   â”‚                         â”‚                         â”‚â”€â”€SELECT usuarioâ”€â”€â”€â”€â”€â”€>â”‚
   â”‚                         â”‚                         â”‚<â”€â”€UsuÃ¡rio encontradoâ”€â”€â”‚
   â”‚                         â”‚                         â”‚                      â”‚
   â”‚                         â”‚                         â”œâ”€Validar senha        â”‚
   â”‚                         â”‚                         â”‚ (bcrypt compare)      â”‚
   â”‚                         â”‚                         â”‚                      â”‚
   â”‚                         â”‚ <â”€â”€JWT + user dataâ”€â”€â”€â”€â”€â”€â”‚                      â”‚
   â”‚                         â”‚                         â”‚                      â”‚
   â”‚                    localStorage:                  â”‚                      â”‚
   â”‚                    - token (JWT)                  â”‚                      â”‚
   â”‚                    - user ({...tipo...})          â”‚                      â”‚
   â”‚                         â”‚                         â”‚                      â”‚
   â”‚ <â”€â”€â”€Redirect /adminâ”€â”€â”€â”€â”€â”‚                         â”‚                      â”‚
   â”‚                         â”‚                         â”‚                      â”‚
```

---

## ğŸ›¡ï¸ Fluxo de AutorizaÃ§Ã£o/Acesso

```
USUÃRIO TENTA ACESSAR /admin/tecnicos

                    â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  PrivateRoute    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ localStorage.getItem    â”‚
         â”‚ token? user?            â”‚
         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
              â”‚ NÃƒO            â”‚ SIM
              â”‚                â”‚
              â–¼                â–¼
      [Redirect to    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        Login]        â”‚ requiredRole?    â”‚
                      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
                           â”‚ NÃƒO     â”‚ SIM
                           â”‚         â”‚
                           â–¼         â–¼
                        [Render   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        Component]â”‚user.tipo ==      â”‚
                                  â”‚requiredRole?     â”‚
                                  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
                                       â”‚ NÃƒO     â”‚ SIM
                                       â”‚         â”‚
                                       â–¼         â–¼
                                  [Acesso    [Render
                                   Negado]    Component
                                            + Layout]
```

---

## ğŸ“Š Estrutura de Menu por Papel

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      USUÃRIO LOGADO                             â”‚
â”‚                    (user.tipo = 'admin')                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   ADMIN SYSTEM                           â”‚  â”‚
â”‚  â”‚                   ğŸ‘¤ Admin User                          â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  [âœ“] ğŸ“Š Dashboard                                       â”‚  â”‚
â”‚  â”‚  [âœ“] ğŸ‘¨â€ğŸ”§ TÃ©cnicos                                       â”‚  â”‚
â”‚  â”‚  [âœ“] ğŸª Lojas                                            â”‚  â”‚
â”‚  â”‚  [âœ“] ğŸ‘¥ Clientes                                         â”‚  â”‚
â”‚  â”‚  [âœ“] ğŸ“¥ Importar Clientes                                â”‚  â”‚
â”‚  â”‚  [âœ“] ğŸ”— Atribuir UsuÃ¡rios                                â”‚  â”‚
â”‚  â”‚  [âœ“] ğŸ“… Agendamentos                                     â”‚  â”‚
â”‚  â”‚  [âœ“] ğŸ“‹ Ordem de ServiÃ§o                                 â”‚  â”‚
â”‚  â”‚  [âœ“] ğŸ“Š RelatÃ³rios                                       â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚  â”‚
â”‚  â”‚  [Logout]                                               â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      USUÃRIO LOGADO                             â”‚
â”‚                   (user.tipo = 'tecnico')                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   ADMIN SYSTEM                           â”‚  â”‚
â”‚  â”‚                   ğŸ‘¤ TÃ©cnico User                        â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  [âœ“] ğŸ“Š Dashboard                                       â”‚  â”‚
â”‚  â”‚  [âœ“] ğŸ“‹ Minhas Ordens de ServiÃ§o                         â”‚  â”‚
â”‚  â”‚  [âœ“] ğŸ“… Agendamentos                                     â”‚  â”‚
â”‚  â”‚  [âœ“] ğŸ“Š RelatÃ³rios                                       â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚  â”‚
â”‚  â”‚  [Logout]                                               â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      USUÃRIO LOGADO                             â”‚
â”‚                   (user.tipo = 'cliente')                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   ADMIN SYSTEM                           â”‚  â”‚
â”‚  â”‚                   ğŸ‘¤ Cliente User                        â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  [âœ“] ğŸ“Š Dashboard                                       â”‚  â”‚
â”‚  â”‚  [âœ“] ğŸ“… Meus Agendamentos                                â”‚  â”‚
â”‚  â”‚  [âœ“] ğŸ“Š Meus RelatÃ³rios                                  â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚  â”‚
â”‚  â”‚  [Logout]                                               â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Fluxo de ImportaÃ§Ã£o de Clientes

```
ADMIN                         FRONTEND                    BACKEND             BANCO

  â”‚                              â”‚                          â”‚                   â”‚
  â”‚â”€â”€Click "Importar"â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚                   â”‚
  â”‚                              â”‚                          â”‚                   â”‚
  â”‚<â”€â”€â”€â”€â”€Abrir File Dialogâ”€â”€â”€â”€â”€â”€â”€â”‚                          â”‚                   â”‚
  â”‚                              â”‚                          â”‚                   â”‚
  â”‚â”€â”€Select CSV/Excelâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚                   â”‚
  â”‚                              â”‚                          â”‚                   â”‚
  â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚                   â”‚
  â”‚                         â”‚ Parse CSV   â”‚                  â”‚                   â”‚
  â”‚                         â”‚ ou XLSX     â”‚                  â”‚                   â”‚
  â”‚                         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                  â”‚                   â”‚
  â”‚                                â”‚                        â”‚                   â”‚
  â”‚<â”€â”€â”€â”€â”€Show Previewâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                        â”‚                   â”‚
  â”‚ (primeiras 5 linhas)           â”‚                        â”‚                   â”‚
  â”‚                                â”‚                        â”‚                   â”‚
  â”‚â”€â”€Click "Importar"â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                        â”‚                   â”‚
  â”‚                                â”‚â”€â”€POST /importarâ”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚
  â”‚                                â”‚ [{nome, email, ...}]   â”‚                   â”‚
  â”‚                                â”‚                        â”œâ”€Validar dadosâ”€â”€>  â”‚
  â”‚                                â”‚                        â”‚                   â”‚
  â”‚                                â”‚                        â”œâ”€Hash senhaâ”€â”€â”€â”€>   â”‚
  â”‚                                â”‚                        â”‚                   â”‚
  â”‚                                â”‚                        â”œâ”€Verificar dupâ”€â”€>  â”‚
  â”‚                                â”‚                        â”‚                   â”‚
  â”‚                                â”‚                        â”‚<â”€Duplicatasâ”€â”€â”€â”€   â”‚
  â”‚                                â”‚                        â”‚                   â”‚
  â”‚                                â”‚                        â”œâ”€INSERT usuarios-> â”‚
  â”‚                                â”‚                        â”‚ (type='cliente')   â”‚
  â”‚                                â”‚                        â”‚<â”€Inseridasâ”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                                â”‚<â”€â”€â”€â”€Responseâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                   â”‚
  â”‚                                â”‚ {importados, total, err} â”‚                   â”‚
  â”‚                                â”‚                        â”‚                   â”‚
  â”‚<â”€â”€â”€â”€â”€Success Messageâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                        â”‚                   â”‚
  â”‚ "N clientes importados"        â”‚                        â”‚                   â”‚
```

---

## ğŸ”— RelaÃ§Ã£o entre UsuÃ¡rios e TÃ©cnicos

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           TABELA usuarios                                â”‚
â”œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¤
â”‚ id â”‚ nome     â”‚ email      â”‚ tipo â”‚ tecnico_id    â”‚ ... â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚ 1  â”‚ Admin    â”‚ admin@...  â”‚admin â”‚ NULL          â”‚     â”‚
â”‚ 2  â”‚ JoÃ£o     â”‚ joao@...   â”‚tecnicoâ”‚ NULL         â”‚     â”‚
â”‚ 3  â”‚ Maria    â”‚ maria@...  â”‚clienteâ”‚ 2 â”€â”€â”€â”€â”€â”€â”   â”‚     â”‚
â”‚ 4  â”‚ Pedro    â”‚ pedro@...  â”‚clienteâ”‚ 2 â”€â”€â”€â”€â”€â”€â”¼â”€â”€>â”‚ JoÃ£o â”‚
â”‚ 5  â”‚ Ana      â”‚ ana@...    â”‚clienteâ”‚ NULL    â”‚   â”‚     â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜

QUERY para ver atribuiÃ§Ãµes:
SELECT u.nome, u.email, u.tipo, t.nome as tecnico_responsavel
FROM usuarios u
LEFT JOIN usuarios t ON u.tecnico_id = t.id;

Resultado:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ nome   â”‚ email      â”‚ tipo   â”‚ tecnico_resp     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Admin  â”‚ admin@...  â”‚ admin  â”‚ NULL             â”‚
â”‚ JoÃ£o   â”‚ joao@...   â”‚ tecnicoâ”‚ NULL             â”‚
â”‚ Maria  â”‚ maria@...  â”‚ clienteâ”‚ JoÃ£o             â”‚
â”‚ Pedro  â”‚ pedro@...  â”‚ clienteâ”‚ JoÃ£o             â”‚
â”‚ Ana    â”‚ ana@...    â”‚ clienteâ”‚ NULL             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Arquitetura de Dados

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          BANCO DE DADOS MySQL                       â”‚
â”‚        (service_order_db)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Tabela: usuarios                             â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ PK: id INT                                   â”‚  â”‚
â”‚  â”‚ nome VARCHAR(100)                            â”‚  â”‚
â”‚  â”‚ email VARCHAR(100) UNIQUE                    â”‚  â”‚
â”‚  â”‚ senha_hash VARCHAR(255)                      â”‚  â”‚
â”‚  â”‚ tipo ENUM('admin','tecnico','cliente') â—„â”€â”€â”€â”€â”¼â”€ KEY: Papel do usuÃ¡rio
â”‚  â”‚ telefone VARCHAR(20)                         â”‚  â”‚
â”‚  â”‚ tecnico_id INT (FK) â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”¼â”€ KEY: ReferÃªncia a tÃ©cnico
â”‚  â”‚ ativo BOOLEAN DEFAULT true                  â”‚  â”‚
â”‚  â”‚ created_at TIMESTAMP                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                     â–²                               â”‚
â”‚                     â”‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Self-join              â”‚ Outras tabelas:   â”‚   â”‚
â”‚  â”‚ para tÃ©cnico           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ responsÃ¡vel            â”‚ lojas              â”‚   â”‚
â”‚  â”‚                        â”‚ tecnicos (view?)   â”‚   â”‚
â”‚  â”‚                        â”‚ agendamentos       â”‚   â”‚
â”‚  â”‚                        â”‚ fotos_servico      â”‚   â”‚
â”‚  â”‚                        â”‚ relatorios         â”‚   â”‚
â”‚  â”‚                        â”‚ checklist_itens    â”‚   â”‚
â”‚  â”‚                        â”‚ logs_acesso        â”‚   â”‚
â”‚  â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Fluxo de RequisiÃ§Ã£o Autenticada

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             REQUISIÃ‡ÃƒO COM AUTENTICAÃ‡ÃƒO                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FRONTEND (Axios)                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚ axios.get('/api/usuarios', {                                    â”‚
â”‚   headers: {                                                    â”‚
â”‚     'Authorization': `Bearer ${localStorage.token}` â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   }                                                           â”‚  â”‚
â”‚ })                                                           â”‚  â”‚
â”‚                                                               â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”˜
                                                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”
â”‚ BACKEND (Express)                                             â”‚  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”¤
â”‚                                                               â”‚  â”‚
â”‚ app.get('/api/usuarios', authMiddleware, (req, res) => {   â”‚  â”‚
â”‚   // authMiddleware recebe token â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚ authMiddleware:                        â”‚                   â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
â”‚   â”‚ 1. Extrai token do header             â”‚                   â”‚
â”‚   â”‚ 2. Verifica se token vÃ¡lido (JWT)     â”‚                   â”‚
â”‚   â”‚ 3. Decodifica token â†’ user data       â”‚                   â”‚
â”‚   â”‚ 4. Attach user ao req.user            â”‚                   â”‚
â”‚   â”‚ 5. PrÃ³ximo middleware                 â”‚                   â”‚
â”‚   â”‚                                        â”‚                   â”‚
â”‚   â”‚ Se falha:                             â”‚                   â”‚
â”‚   â”‚ - Retorna 401 Unauthorized            â”‚                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                  â”‚
â”‚   Controller (usuarioController.listar):                       â”‚
â”‚   - Acessa req.user (contÃ©m papel do usuÃ¡rio)                  â”‚
â”‚   - Faz query no banco de dados                                â”‚
â”‚   - Retorna lista de usuÃ¡rios                                  â”‚
â”‚                                                                  â”‚
â”‚ })                                                             â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ˆ Estrutura de Componentes

```
App.js
â”œâ”€â”€ Router
â”‚   â”œâ”€â”€ Route "/" â†’ Login (se nÃ£o autenticado)
â”‚   â”‚
â”‚   â””â”€â”€ Route "/admin/*" â†’ PrivateRoute
â”‚       â””â”€â”€ PrivateRoute (valida token + role)
â”‚           â””â”€â”€ Layout
â”‚               â”œâ”€â”€ Sidebar (getMenuItems() por papel)
â”‚               â”‚   â”œâ”€â”€ Dashboard [âœ“ admin] [âœ“ tecnico] [âœ“ cliente]
â”‚               â”‚   â”œâ”€â”€ TÃ©cnicos [âœ“ admin]
â”‚               â”‚   â”œâ”€â”€ Lojas [âœ“ admin]
â”‚               â”‚   â”œâ”€â”€ Clientes [âœ“ admin]
â”‚               â”‚   â”œâ”€â”€ Importar Clientes [âœ“ admin]
â”‚               â”‚   â”œâ”€â”€ Atribuir UsuÃ¡rios [âœ“ admin]
â”‚               â”‚   â”œâ”€â”€ Agendamentos [âœ“ admin] [âœ“ tecnico] [âœ“ cliente]
â”‚               â”‚   â”œâ”€â”€ Ordem de ServiÃ§o [âœ“ admin]
â”‚               â”‚   â”œâ”€â”€ RelatÃ³rios [âœ“ admin] [âœ“ tecnico] [âœ“ cliente]
â”‚               â”‚   â””â”€â”€ Logout
â”‚               â”‚
â”‚               â””â”€â”€ Page Component
â”‚                   â”œâ”€â”€ AdminDashboard
â”‚                   â”œâ”€â”€ GerenciarTecnicos (admin only)
â”‚                   â”œâ”€â”€ GerenciarLojas (admin only)
â”‚                   â”œâ”€â”€ GerenciarClientes (admin only)
â”‚                   â”œâ”€â”€ ImportarClientes (admin only)
â”‚                   â”œâ”€â”€ AtribuirUsuarios (admin only)
â”‚                   â”œâ”€â”€ GerenciarAgendamentos (all)
â”‚                   â”œâ”€â”€ NovaOrdemServico (admin)
â”‚                   â””â”€â”€ RelatoriosAgendamentos (all)
```

---

## ğŸ”„ Ciclo de Vida do Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Usuario: admin@sistema.com             â”‚
â”‚ Token: eyJ0eXAiOiJKV1QiLC...          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PrivateRoute                           â”‚
â”‚ - Valida token                         â”‚
â”‚ - Valida papel (se requiredRole)       â”‚
â”‚ - Renderiza children                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layout                                 â”‚
â”‚ useEffect(() => {                      â”‚
â”‚   user = authService.getUser()         â”‚
â”‚   menuItems = getMenuItems()           â”‚
â”‚ })                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼                â–¼                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Sidebar â”‚    â”‚ Page     â”‚    â”‚ User Info     â”‚
    â”‚ Menu    â”‚    â”‚Component â”‚    â”‚ + Logout      â”‚
    â”‚ 8 items â”‚    â”‚          â”‚    â”‚               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Admin clicks "Logout"                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. authService.logout()                â”‚
â”‚ 2. localStorage.clear()                â”‚
â”‚ 3. Redirect to "/"                     â”‚
â”‚ 4. Show Login page                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¡ Endpoints Map

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Endpoints da API                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚ AUTH                                                     â”‚
â”‚ â”œâ”€ POST /api/auth/login              â†’ JWT + user       â”‚
â”‚ â””â”€ POST /api/auth/logout             â†’ Success          â”‚
â”‚                                                          â”‚
â”‚ USUÃRIOS                                                 â”‚
â”‚ â”œâ”€ GET /api/usuarios                 â†’ [users]          â”‚
â”‚ â”œâ”€ GET /api/usuarios/:id             â†’ user             â”‚
â”‚ â””â”€ PATCH /api/usuarios/:id           â†’ Success          â”‚
â”‚                                                          â”‚
â”‚ CLIENTES                                                 â”‚
â”‚ â”œâ”€ GET /api/clientes                 â†’ [clients]        â”‚
â”‚ â”œâ”€ POST /api/clientes                â†’ client (created) â”‚
â”‚ â””â”€ POST /api/clientes/importar       â†’ {importados,...} â”‚
â”‚                                                          â”‚
â”‚ TECNICOS (A implementar)                                 â”‚
â”‚ â”œâ”€ GET /api/tecnicos                 â†’ [tecnicos]       â”‚
â”‚ â”œâ”€ GET /api/tecnicos/:id/ordens      â†’ [orders]         â”‚
â”‚ â””â”€ PATCH /api/tecnicos/:id/stats     â†’ stats            â”‚
â”‚                                                          â”‚
â”‚ AGENDAMENTOS (A implementar)                             â”‚
â”‚ â”œâ”€ GET /api/agendamentos             â†’ [schedules]      â”‚
â”‚ â”œâ”€ POST /api/agendamentos            â†’ schedule         â”‚
â”‚ â””â”€ PATCH /api/agendamentos/:id       â†’ updated          â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Decision Matrix - Qual Papel Pode Fazer O QuÃª?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AÃ§Ã£o                      â”‚   Admin   â”‚ TÃ©cnico â”‚Cliente â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Login                     â”‚    âœ“      â”‚    âœ“    â”‚   âœ“    â”‚
â”‚ Ver Dashboard             â”‚    âœ“      â”‚    âœ“    â”‚   âœ“    â”‚
â”‚ Gerenciar TÃ©cnicos        â”‚    âœ“      â”‚    âœ—    â”‚   âœ—    â”‚
â”‚ Gerenciar Lojas           â”‚    âœ“      â”‚    âœ—    â”‚   âœ—    â”‚
â”‚ Gerenciar Clientes        â”‚    âœ“      â”‚    âœ—    â”‚   âœ—    â”‚
â”‚ Importar Clientes         â”‚    âœ“      â”‚    âœ—    â”‚   âœ—    â”‚
â”‚ Atribuir TÃ©cnicos         â”‚    âœ“      â”‚    âœ—    â”‚   âœ—    â”‚
â”‚ Ver Agendamentos          â”‚    âœ“      â”‚    âœ“    â”‚   âœ“    â”‚
â”‚ Criar Ordem de ServiÃ§o    â”‚    âœ“      â”‚    ?    â”‚   âœ—    â”‚
â”‚ Preencher Ordem de ServiÃ§oâ”‚    âœ“      â”‚    âœ“    â”‚   âœ—    â”‚
â”‚ Exportar PDF              â”‚    âœ“      â”‚    âœ“    â”‚   âœ—    â”‚
â”‚ Ver RelatÃ³rios            â”‚    âœ“      â”‚    âœ“    â”‚   âœ“    â”‚
â”‚ Logout                    â”‚    âœ“      â”‚    âœ“    â”‚   âœ“    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Legenda:
âœ“ = Permitido
âœ— = NÃ£o permitido
? = A ser implementado
```

---

## ğŸ“Š Estado da AplicaÃ§Ã£o (localStorage)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ localStorage (persistente no navegador)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                            â”‚
â”‚ Key: "token"                               â”‚
â”‚ Value: "eyJ0eXAiOiJKV1QiLCJhbGc..."       â”‚
â”‚        (JWT com user_id, email, tipo)     â”‚
â”‚                                            â”‚
â”‚ Key: "user"                                â”‚
â”‚ Value: {                                   â”‚
â”‚   "id": 1,                                 â”‚
â”‚   "email": "admin@sistema.com",            â”‚
â”‚   "nome": "Admin",                         â”‚
â”‚   "tipo": "admin"  â—„â”€â”€â”€ Define acesso    â”‚
â”‚ }                                          â”‚
â”‚                                            â”‚
â”‚ Ao fazer logout:                           â”‚
â”‚ âœ“ localStorage.removeItem("token")         â”‚
â”‚ âœ“ localStorage.removeItem("user")          â”‚
â”‚ âœ“ Redirect para "/"                        â”‚
â”‚                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Request/Response Cycle

```
FRONTEND                           BACKEND
   â”‚                                 â”‚
   â”œâ”€ 1. Axios GET /usuarios    â”€â”€â”€â”€>â”‚
   â”‚    Headers: {                   â”‚
   â”‚      Authorization: Bearer JWT  â”‚
   â”‚    }                            â”‚
   â”‚                                 â”‚
   â”‚    2. Middleware process    <â”€â”€â”€â”¤
   â”‚       â”œâ”€ Valida JWT             â”‚
   â”‚       â”œâ”€ Extrai user            â”‚
   â”‚       â””â”€ Continua               â”‚
   â”‚                                 â”‚
   â”‚    3. Controller process    <â”€â”€â”€â”¤
   â”‚       â”œâ”€ Query BD               â”‚
   â”‚       â”œâ”€ Format dados           â”‚
   â”‚       â””â”€ Return JSON            â”‚
   â”‚                                 â”‚
   â”‚<â”€ 4. Response JSON          â”€â”€â”€â”€â”¤
   â”‚    {                            â”‚
   â”‚      success: true,             â”‚
   â”‚      data: [{...}, {...}]       â”‚
   â”‚    }                            â”‚
   â”‚                                 â”‚
   â”œâ”€ 5. Update state                â”‚
   â”œâ”€ 6. Re-render component         â”‚
   â”‚                                 â”‚
   â””â”€ 7. User vÃª resultado na UI     â”‚
```

---

**VersÃ£o:** 1.0  
**CriaÃ§Ã£o:** 2024  
**PropÃ³sito:** DocumentaÃ§Ã£o visual da arquitetura RBAC
